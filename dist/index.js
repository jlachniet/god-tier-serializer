/*! god-tier-serializer 0.1.0 | MIT License | https://github.com/jlachniet/god-tier-serializer */
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.GodTierSerializer=r():e.GodTierSerializer=r()}(this,(function(){return function(){"use strict";var e={d:function(r,t){for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},o:function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};function t(e,r){for(var t=0;t<e.length;t++)if(r(e[t],t,e))return e[t]}function n(e,r){for(var t=0;t<e.length;t++)if((n=e[t])===(o=r)?0!==n||1/n==1/o:n!=n&&o!=o)return t;var n,o;return-1}function o(e){return null===e?"null":typeof e}e.r(r),e.d(r,{config:function(){return i},deserialize:function(){return s},register:function(){return c},serialize:function(){return p}});var i={forceSerialization:!1,inferPrototypeNames:!1},a=[[null,"null"],[Object.prototype,"Object"],[Array.prototype,"Array"],[Date.prototype,"Date"],[RegExp.prototype,"RegExp"],[String.prototype,"String"],[Error.prototype,"Error"]];function u(e){return t(a,(function(r){return e===r[1]}))}function c(e,r){if(!function(e,r){for(var t=0;t<e.length;t++)if(Array.isArray(r[t])){for(var n=!1,i=0;i<r[t].length;i++)o(e[t])===r[t][i]&&(n=!0);if(!n)return!1}else if(o(e[t])!==r[t])return!1;return!0}([e,r],["object",["string","undefined"]]))throw new TypeError("Invalid arguments, expected (prototype: object, name?: string)");if(!r){if(!Object.prototype.hasOwnProperty.call(e,"constructor")||!Object.prototype.hasOwnProperty.call(e.constructor,"name"))throw new Error("Prototype name not provided and could not be inferred");r=e.constructor.name,i.inferPrototypeNames||(console.warn("Prototype name not provided explicitly, falling back to "+r),console.warn("This may cause compatibility problems!"))}var n="@"+r;if(function(e){return t(a,(function(r){return e===r[0]}))}(e))throw new Error("Cannot register, prototype "+r+"is already registered");if(u(n))throw new Error("Cannot register, prototype name "+r+" is already in use");a.push([e,n])}function p(e){var r=[],u=[];return c(e),JSON.stringify(u);function c(e){switch(o(e)){case"undefined":return r.push(void 0),u.push(["undefined"]),r.length-1;case"null":return r.push(void 0),u.push(["null"]),r.length-1;case"bigint":return l=e,r.push(l),u.push(["bigint",String(l)]),r.length-1;case"boolean":return s=e,r.push(s),u.push(["boolean",s]),r.length-1;case"number":return function(e){r.push(e),1/e==-1/0?u.push(["number","-0"]):u.push(["number",String(e)]);return r.length-1}(e);case"string":return p=e,r.push(p),u.push(["string",p]),r.length-1;case"object":return function(e){var o,p=t(a,(function(r){return r[0]===Object.getPrototypeOf(e)}));if(!p&&!i.forceSerialization)throw Object.prototype.hasOwnProperty.call(Object.getPrototypeOf(e),"constructor")&&Object.prototype.hasOwnProperty.call(Object.getPrototypeOf(e).constructor,"name")?new Error("Could not serialize object with unregistered prototype "+Object.getPrototypeOf(e).constructor.name+".prototype"):new Error("Could not serialize object with unregistered prototype");if(p)switch(Object.prototype.toString.call(e).slice(8,-1)){case"Array":o=["Array",p[1],[]];break;case"Date":o=["Date",p[1],[],Date.prototype.valueOf.call(e)];break;case"RegExp":o=["RegExp",p[1],[],RegExp.prototype.toString.call(e)];break;case"String":o=["String",p[1],[],String.prototype.valueOf.call(e)];break;default:o=["Object",p[1],[]]}else o=["Object","Object",[]];r.push(e),u.push(o);var s=r.length-1;return Object.getOwnPropertyNames(e).forEach((function(t){var i=Object.getOwnPropertyDescriptor(e,t);if(i.get)throw new TypeError("Getters are not supported yet");if(i.set)throw new TypeError("Setters are not supported yet");o[2].push([n(r,t)>-1?n(r,t):c(t),n(r,i.value)>-1?n(r,i.value):c(i.value),i.configurable,i.enumerable,i.writable])})),s}(e);case"symbol":throw new TypeError("Symbols are not supported yet");case"function":throw new TypeError("Functions are not supported yet");default:throw new TypeError("Unknown type "+typeof e)}var p,s,l}}function s(e){var r=JSON.parse(e),t=[];return r.forEach((function(e){switch(e[0]){case"undefined":t.push(void 0);break;case"null":t.push(null);break;case"bigint":t.push(BigInt(e[1]));break;case"boolean":case"string":t.push(e[1]);break;case"number":t.push(Number(e[1]));break;default:var r,n=u(e[1]),o=!1;switch(e[0]){case"Array":r=new Array;break;case"Date":r=new Date(e[3]);break;case"RegExp":var i=e[3].lastIndexOf("/"),a=e[3].substring(1,i),c=e[3].substring(i+1);r=new RegExp(a,c);break;case"String":r=new String(e[3]);break;default:r=Object.create(n[0]),o=!0}if(!o&&e[0]!==e[1])if(Object.setPrototypeOf)Object.setPrototypeOf(r,n[0]);else{if(!r.__proto__)throw new TypeError("Could not deserialize RegExp with modified constructor, unsupported by environment");r.__proto__=n[0]}t.push(r)}})),r.forEach((function(e,r){(function(e){return e.length>=3})(e)&&e[2].forEach((function(e){Object.defineProperty(t[r],t[e[0]],{value:t[e[1]],configurable:e[2],enumerable:e[3],writable:e[4]})}))})),t[0]}return r}()}));