/*! god-tier-serializer 0.1.0 | MIT License | https://github.com/jlachniet/god-tier-serializer */
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define([],r):"object"==typeof exports?exports.GodTierSerializer=r():e.GodTierSerializer=r()}(this,(function(){return function(){"use strict";var e={d:function(r,t){for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},o:function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r:function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};e.r(r),e.d(r,{register:function(){return p},serialize:function(){return s},deserialize:function(){return l}});var t=!1,n=!1,o=[[null,"null"],[Object.prototype,"Object"],[Array.prototype,"Array"],[Date.prototype,"Date"],[RegExp.prototype,"RegExp"],[String.prototype,"String"]];function a(e,r){for(var t=0;t<e.length;t++)if(r(e[t],t,e))return e[t]}function u(e,r){for(var t=0;t<e.length;t++)if((n=e[t])===(o=r)?0!==n||1/n==1/o:n!=n&&o!=o)return t;var n,o;return-1}function i(e){return null===e?"null":typeof e}function c(e){return a(o,(function(r){return e===r[1]}))}function p(e,r){if(!function(e,r){for(var t=0;t<e.length;t++)if(Array.isArray(r[t])){for(var n=!1,o=0;o<r[t].length;o++)i(e[t])===r[t][o]&&(n=!0);if(!n)return!1}else if(i(e[t])!==r[t])return!1;return!0}([e,r],["object",["string","undefined"]]))throw new TypeError("Invalid arguments, expected (prototype: object, name?: string)");if(!r){if(!Object.prototype.hasOwnProperty.call(e,"constructor")||!Object.prototype.hasOwnProperty.call(e.constructor,"name"))throw new Error("Prototype name not provided and could not be inferred");r=e.constructor.name,n||(console.warn("Prototype name not provided explicitly, falling back to "+r),console.warn("This may cause compatibility problems!"))}var t="@"+r;if(function(e){return a(o,(function(r){return e===r[0]}))}(e))throw new Error("Cannot register, prototype "+r+"is already registered");if(c(t))throw new Error("Cannot register, prototype name "+r+" is already in use");o.push([e,t])}function s(e){var r=[],n=[];return c(e),JSON.stringify(n);function c(e){switch(i(e)){case"undefined":return r.push(void 0),n.push(["undefined"]),r.length-1;case"null":return r.push(void 0),n.push(["null"]),r.length-1;case"bigint":return l=e,r.push(l),n.push(["bigint",String(l)]),r.length-1;case"boolean":return s=e,r.push(s),n.push(["boolean",s]),r.length-1;case"number":return function(e){r.push(e),1/e==-1/0?n.push(["number","-0"]):n.push(["number",String(e)]);return r.length-1}(e);case"string":return p=e,r.push(p),n.push(["string",p]),r.length-1;case"object":return function(e){var i,p=a(o,(function(r){return r[0]===Object.getPrototypeOf(e)}));if(!p&&!t)throw Object.prototype.hasOwnProperty.call(Object.getPrototypeOf(e),"constructor")&&Object.prototype.hasOwnProperty.call(Object.getPrototypeOf(e).constructor,"name")?new Error("Could not serialize object with unregistered prototype "+Object.getPrototypeOf(e).constructor.name+".prototype"):new Error("Could not serialize object with unregistered prototype");if(p)switch(Object.prototype.toString.call(e).slice(8,-1)){case"Array":i=["Array",p[1],[]];break;case"Date":i=["Date",p[1],[],Date.prototype.valueOf.call(e)];break;case"RegExp":i=["RegExp",p[1],[],RegExp.prototype.toString.call(e)];break;case"String":i=["String",p[1],[],String.prototype.valueOf.call(e)];break;default:i=["Object",p[1],[]]}else i=["Object","Object",[]];r.push(e),n.push(i);var s=r.length-1;return Object.getOwnPropertyNames(e).forEach((function(t){var n=Object.getOwnPropertyDescriptor(e,t);if(n.get)throw new TypeError("Getters are not supported yet");if(n.set)throw new TypeError("Setters are not supported yet");i[2].push([u(r,t)>-1?u(r,t):c(t),u(r,n.value)>-1?u(r,n.value):c(n.value),n.configurable,n.enumerable,n.writable])})),s}(e);case"symbol":throw new TypeError("Symbols are not supported yet");case"function":throw new TypeError("Functions are not supported yet");default:throw new TypeError("Unknown type "+typeof e)}var p,s,l}}function l(e){var r=JSON.parse(e),t=[];return r.forEach((function(e){switch(e[0]){case"undefined":t.push(void 0);break;case"null":t.push(null);break;case"bigint":t.push(BigInt(e[1]));break;case"boolean":case"string":t.push(e[1]);break;case"number":t.push(Number(e[1]));break;default:var r,n=c(e[1]);switch(e[0]){case"Array":r=new Array;break;case"Date":r=new Date(e[3]);break;case"RegExp":var o=e[3].lastIndexOf("/"),a=e[3].substring(1,o),u=e[3].substring(o+1);r=new RegExp(a,u);break;case"String":r=new String(e[3]);break;default:t.push(Object.create(n[0]))}if(e[0]!==e[1])if(Object.setPrototypeOf)Object.setPrototypeOf(r,n[0]);else{if(!r.__proto__)throw new TypeError("Could not deserialize RegExp with modified constructor, unsupported by environment");r.__proto__=n[0]}t.push(r)}})),r.forEach((function(e,r){(function(e){return e[0].charAt(0)===e[0].charAt(0).toUpperCase()})(e)&&e[2].forEach((function(e){Object.defineProperty(t[r],t[e[0]],{value:t[e[1]],configurable:e[2],enumerable:e[3],writable:e[4]})}))})),t[0]}return r}()}));